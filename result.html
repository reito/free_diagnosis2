<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>診断結果</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f7f7;
            margin: 0;
            padding: 20px;
            text-align: center;
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-box {
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(106, 193, 208, 0.1);
            margin: 0 auto;
            max-width: 600px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid rgba(106, 193, 208, 0.1);
        }

        h1 {
            color: #5fb5d0;
            font-size: 28px;
            margin: 0 0 30px;
            font-weight: 700;
            line-height: 1.4;
        }

        .result-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #2c3e50;
            line-height: 1.4;
            padding: 0 10px;
        }

        .result-text {
            font-size: 16px;
            margin-bottom: 30px;
            color: #456;
            line-height: 1.8;
            text-align: left;
            padding: 0 15px;
        }

        .percentages {
            margin: 30px auto;
            font-weight: 500;
            background: rgba(106, 193, 208, 0.05);
            padding: 20px;
            border-radius: 12px;
            color: #456;
            font-size: 16px;
            max-width: 500px;
            line-height: 1.6;
        }

        .character-image {
            width: 200px;
            height: auto;
            margin: 20px auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .character-name {
            font-size: 14px;
            color: #666;
            margin: 10px 0;
            text-align: center;
        }

        .cta-text {
            margin: 35px 0;
            color: #5fb5d0;
            font-weight: 500;
            font-size: 17px;
            line-height: 1.8;
            padding: 0 15px;
        }

        .btn {
            background: linear-gradient(135deg, #FF88B3 0%, #FF69B4 100%);
            color: #fff;
            border: none;
            padding: 16px 25px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            display: block;
            text-decoration: none;
            margin: 0 auto;
            width: 100%;
            max-width: 320px;
            box-sizing: border-box;
            box-shadow: 0 5px 15px rgba(255, 136, 179, 0.2);
            text-align: center;
            letter-spacing: 0.5px;
            line-height: 1.5;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 136, 179, 0.3);
            background: linear-gradient(135deg, #FF69B4 0%, #FF88B3 100%);
        }

        .btn-description {
            font-size: 14px;
            color: #666;
            display: block;
            font-weight: normal;
            line-height: 1.6;
            margin: 8px auto 25px;
            max-width: 320px;
            text-align: center;
        }

        .cta-container {
            text-align: center;
            margin: 35px 0;
            padding: 0 15px;
        }

        .cta-title {
            color: #FF69B4;
            font-size: 19px;
            font-weight: 500;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .button-container {
            text-align: center;
            margin-top: 30px;
        }

        .return-link {
            margin-top: 20px;
            color: #5fb5d0;
            text-decoration: none;
            font-size: 15px;
            display: inline-block;
            padding: 10px;
            transition: all 0.3s ease;
        }

        .return-link:hover {
            color: #4a90e2;
            transform: translateY(-1px);
        }

        .result-graphs {
            max-width: 600px;
            margin: 30px auto;
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(106, 193, 208, 0.1);
        }

        .graph-container {
            margin: 20px 0;
        }

        .graph-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .graph-label span:last-child {
            margin-left: 10px;
        }

        .graph-bar {
            width: 100%;
            height: 24px;
            background: #e9f5f7;
            border-radius: 12px;
            overflow: hidden;
        }

        .graph-fill {
            height: 100%;
            width: 0;
            background: linear-gradient(135deg, #6ac1d0 0%, #5fb5d0 100%);
            transition: width 1s ease;
        }

        .btn.secondary {
            background: linear-gradient(135deg, #6ac1d0 0%, #5fb5d0 100%);
            font-size: 15px;
            padding: 14px 25px;
            max-width: 200px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(106, 193, 208, 0.2);
        }

        .btn.secondary:hover {
            box-shadow: 0 8px 20px rgba(106, 193, 208, 0.3);
            background: linear-gradient(135deg, #5fb5d0 0%, #6ac1d0 100%);
        }

        @media (max-width: 480px) {
            body {
                padding: 15px;
            }

            .result-box {
                padding: 30px 20px;
                margin: 0 auto;
            }

            h1 {
                font-size: 24px;
                margin-bottom: 25px;
            }

            .result-title {
                font-size: 19px;
                margin-bottom: 20px;
                padding: 0 5px;
            }

            .result-text {
                font-size: 15px;
                margin-bottom: 25px;
                padding: 0 5px;
            }

            .percentages {
                margin: 25px auto;
                padding: 15px;
                font-size: 14px;
                border-radius: 10px;
            }

            .cta-text {
                margin: 30px 0;
                font-size: 15px;
                padding: 0 10px;
            }

            .btn {
                padding: 14px 20px;
                font-size: 14px;
                max-width: 300px;
            }

            .btn-description {
                font-size: 13px;
                margin-bottom: 20px;
            }

            .return-link {
                font-size: 14px;
                padding: 8px;
            }

            .character-image {
                width: 150px;
            }

            .result-graphs {
                padding: 15px;
                margin: 20px auto;
            }

            .graph-container {
                margin: 12px 0;
            }

            .graph-label {
                font-size: 14px;
                margin-bottom: 6px;
            }

            .graph-bar {
                height: 16px;
            }

            .cta-title {
                font-size: 17px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="result-box">
        <h1>診断結果</h1>
        <div class="result-title" id="resultType"></div>
        
        <div id="character-container">
            <img id="character-image" class="character-image" alt="キャラクター">
            <div id="character-name" class="character-name"></div>
        </div>

        <div class="result-graphs">
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type1-label"></span>
                    <span><span id="type1-percentage"></span>%</span>
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type1-bar"></div>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type2-label"></span>
                    <span><span id="type2-percentage"></span>%</span>
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type2-bar"></div>
                </div>
            </div>
            <div class="graph-container">
                <div class="graph-label">
                    <span id="type3-label"></span>
                    <span><span id="type3-percentage"></span>%</span>
                </div>
                <div class="graph-bar">
                    <div class="graph-fill" id="type3-bar"></div>
                </div>
            </div>
        </div>

        <div class="result-text" id="resultText"></div>
        <div class="percentages" id="percentages"></div>

        <div class="cta-container">
            <p class="cta-title">あなたの恋愛・婚活の可能性を広げるために...<br>気になる方をチェック！ ✨</p>
            
            <a href="https://lin.ee/qSZORFf" class="btn">
                運命のパートナーが見つけやすくなる<br>トータルコーディネート
            </a>
            <p class="btn-description">外見＆内面！あなたが引き寄せたい理想の相手と出会うポイントを詳しく解説！</p>

            <a href="https://trial-marriage-hunting.vercel.app/" class="btn">
                婚活に興味はあるけど不安な方へ<br>おためし婚活カウンセリング
            </a>
            <p class="btn-description">理想の出会いに向けて、あなたに合った婚活方法を提案しながらおためし婚活ができます！</p>
        </div>
        
        <div class="button-container">
            <a href="index.html" class="btn secondary">
                診断トップに戻る
            </a>
        </div>

        <div style="margin-top: 50px; color: #666; font-size: 12px;">
            © 2025 BLANCA. All rights reserved.
        </div>
    
    </div>

    <script>
        // キャラクター画像のマッピング
        const characterImages = {
            "キングタイプ": {
                image: "img/king_type.png",
                name: "キングタイプ"
            },
            "ナイトタイプ": {
                image: "img/knight_type.png",
                name: "ナイトタイプ"
            },
            "プリンスタイプ": {
                image: "img/prince_type.png",
                name: "プリンスタイプ"
            },
            "アイドルタイプ": {
                image: "img/idol_type.png",
                name: "アイドルタイプ"
            },
            "バリキャリタイプ": {
                image: "img/career_type.png",
                name: "バリキャリタイプ"
            },
            "マザータイプ": {
                image: "img/mother_type.png",
                name: "マザータイプ"
            },
            "バランスタイプ": {
                male: {
                    image: "img/balance_type_male.png",
                    name: "バランスタイプ（男性）"
                },
                female: {
                    image: "img/balance_type_female.png",
                    name: "バランスタイプ（女性）"
                }
            },
            // 2つのタイプが同じ場合の画像
            "キング＆ナイトタイプ": {
                image: "img/king_knight_type.png",
                name: "キング＆ナイトタイプ"
            },
            "ナイト＆プリンスタイプ": {
                image: "img/knight_prince_type.png",
                name: "ナイト＆プリンスタイプ"
            },
            "プリンス＆キングタイプ": {
                image: "img/prince_king_type.png",
                name: "プリンス＆キングタイプ"
            },
            "アイドル＆バリキャリタイプ": {
                image: "img/idol_career_type.png",
                name: "アイドル＆バリキャリタイプ"
            },
            "バリキャリ＆マザータイプ": {
                image: "img/career_mother_type.png",
                name: "バリキャリ＆マザータイプ"
            },
            "マザー＆アイドルタイプ": {
                image: "img/mother_idol_type.png",
                name: "マザー＆アイドルタイプ"
            }
        };

        // URLから診断結果とスコア情報を取得
        const urlParams = new URLSearchParams(window.location.search);
        const resultType = urlParams.get('result');
        const userGender = urlParams.get('gender') || 'female';

        // 診断結果の説明テキスト
        const descriptions = {
            // 女性向けの説明
            "アイドルタイプ": "アイドルタイプ寄りのあなたは、人から大切にされることに幸せを感じる「愛されキャラ」。明るく可憐な雰囲気で、自然と人の視線を集める存在です。自分の感情を素直に表現できるため、一緒にいる人に安心感とときめきを与えることができます。<br><br>【強み】<br>あなたの最大の魅力は、そのままでも「愛される力」。喜怒哀楽がハッキリしていて、相手にとってはわかりやすく、親しみやすい存在です。恋愛では、自分の気持ちを素直に伝えられることが強みとなり、相手との距離を一気に縮めることができます。<br><br>【気をつけたい点】<br>「もっと愛されたい」という思いが強くなりすぎると、依存的になったり、不安定さが表に出ることも。特別扱いされないと不満に感じる傾向があるため、自分の中に「愛されていなくても自分は価値がある」という基準を持つことが大切です。",

            "バリキャリタイプ": "バリキャリタイプ寄りのあなたは、冷静で判断力に優れた頼れる存在。常に落ち着いた雰囲気をまとい、周囲からの信頼も厚いタイプです。感情よりも理性を大切にし、計画的かつ論理的に物事を進める姿勢が印象的です。<br><br>【強み】<br>自分の軸があり、物事にブレずに取り組める力が最大の魅力。恋愛でもパートナーと対等に向き合い、堅実な関係を築こうとします。周囲の状況を冷静に把握できるため、信頼される存在として長く愛される傾向があります。<br><br>【気をつけたい点】<br>しっかりしている反面、「隙がない」「近寄りがたい」と見られてしまうことも。また、感情をあまり表に出さないため、「何を考えているのかわからない」と思われることもあります。ときには素直な弱さを見せることが、信頼関係を深める一歩になるかもしれません。",

            "マザータイプ": "マザータイプ寄りのあなたは、人の世話を焼くのが得意で、自然と周囲を癒せる存在。包容力があり、相手を思いやる気持ちが深く、優しさにあふれています。落ち着いた雰囲気と、相手の気持ちに寄り添う力をあわせ持つ、心の支えのような人です。<br><br>【強み】<br>誰に対しても優しく、受け入れる器の大きさがあなたの魅力です。恋愛でも「安心できる相手」として信頼されることが多く、自然体で接することで相手をリラックスさせる力を持っています。思いやりと細やかな配慮が、安定した関係性を築く鍵になります。<br><br>【気をつけたい点】<br>人に尽くしすぎて、自分を後回しにしてしまうことも。相手に合わせすぎるあまり、「都合のいい存在」になってしまう可能性もあります。自分自身の気持ちや欲求も大切にし、「自分の幸せ」についてもしっかり考えることが大切です。",

            // 男性向けの説明
            "キングタイプ": "キングタイプ寄りのあなたは、自信に満ち、リーダーシップにあふれた頼れる存在。堂々とした態度と安定感で、周囲から自然と一目置かれるタイプです。しっかりとした価値観と信念を持ち、自らの考えに基づいて行動します。<br><br>【強み】<br>決断力があり、迷いなく行動できる点が大きな魅力です。恋愛でも「頼れるパートナー」としての存在感があり、相手に安心感と信頼を与えられます。ブレない軸と責任感で、長期的な関係を築くことにも向いています。<br><br>【気をつけたい点】<br>自信の強さが「俺様っぽい」「強引」と受け取られることも。自分の考えを押し通すあまり、相手の意見を無視してしまわないよう注意が必要です。相手の感情や立場にも寄り添うことで、より信頼される魅力が高まります。",

            "ナイトタイプ": "ナイトタイプ寄りのあなたは、誠実で思いやりがあり、共感力に優れた優しい人物。人の話にしっかり耳を傾け、相手の心に寄り添うことができる「聞き上手」です。自分よりも相手を優先して考える、献身的な一面があります。<br><br>【強み】<br>信頼関係を築くことに長けており、恋愛でも「安心感」「安定感」を与えられる存在。相手の気持ちを大切にする姿勢が伝わり、じっくりと関係を深めるのが得意です。無償の愛を注げるその優しさが、あなたならではの魅力です。<br><br>【気をつけたい点】<br>優しさが裏目に出て、自己主張を避けがちになったり、遠慮しすぎる傾向があります。また、刺激が少ない印象を与えてしまい、恋愛の初期段階で目立ちにくいことも。自分の考えや気持ちも、しっかりと伝えることを心がけるとより魅力が高まります。",

            "プリンスタイプ": "プリンスタイプ寄りのあなたは、自由でユニークな発想力を持つ「好奇心のかたまり」のような存在。少年のような無邪気さと、どこかミステリアスな一面が絶妙に混ざり合った魅力があります。場を明るくし、自然と人を惹きつけます。<br><br>【強み】<br>飽きさせない会話や行動力があり、恋愛でも「一緒にいて楽しい」「新鮮」と感じてもらえる存在。柔軟でフットワークも軽いため、さまざまなタイプの人と自然に関われます。自分らしさを貫く姿勢が、自由な魅力となって表れます。<br><br>【気をつけたい点】<br>自由を重視するあまり、責任ある関係を避けたくなる傾向も。また、気分屋に見られたり、落ち着きがないと誤解されてしまうこともあります。ときには相手としっかり向き合い、真剣さを見せることも大切です。",

            // バランスタイプの説明
            "バランスタイプ": userGender === 'female' ?
                "あなたは、愛される魅力を持ちつつも、理性的で自立した側面と、優しさや共感力もあわせ持つ、非常にバランスの取れたタイプです。場面や相手に応じて自分の魅力を使い分けられる、柔軟性と包容力のある人物です。<br><br>【強み】<br>感情・思考・共感の3軸が整っており、どんな人とも自然に信頼関係を築くことができます。甘えることもできれば、頼られることにも慣れており、恋愛においては「理想のパートナー」として重宝されやすい存在です。<br><br>【気をつけたい点】<br>器用に立ち回れる分、「自分はどのタイプなのか」と迷いが生じることも。相手に合わせすぎるあまり、自分の気持ちを見失ってしまうこともあるかもしれません。また、自分の理想が明確になっていない可能性もあるため、「本当に大切にしたいもの」に目を向けてみることが大切です。" :
                "あなたは、リーダーシップのある一面と、誠実で思いやり深い姿勢、そして自由でフレッシュな魅力を兼ね備えた、バランスの取れた存在です。ひとつの型にハマらず、柔軟に人や場面に応じて対応できる「万能型」と言えるでしょう。<br><br>【強み】<br>恋愛では「頼れる存在」「癒しの存在」「楽しい存在」という三拍子が揃っており、どんなタイプの相手にもフィットしやすいのが特長です。空気を読んで行動できる器用さと、相手の感情を汲み取る優しさがあなたの魅力です。<br><br>【気をつけたい点】<br>多面的であるがゆえに「結局、自分は何を求めているのか」が曖昧になりやすく、相手に合わせすぎて疲れてしまうこともあります。また、自分の理想が明確になっていない可能性もあるため、ときには自分の「本音」と丁寧に向き合ってみましょう。",
            // 2つのタイプが同じ場合の説明
            "キング＆ナイトタイプ": "あなたは、リーダーシップと誠実さを兼ね備えた、信頼感のある存在です。決断力がありながらも、相手の気持ちを大切にする姿勢が、周囲からの信頼を集めています。<br><br>【強み】<br>頼れる存在でありながら、思いやりのある態度で接することができます。恋愛でも、相手に安心感を与えつつ、適度な刺激も提供できるバランスの良さが魅力です。<br><br>【気をつけたい点】<br>責任感が強すぎて、自分を追い詰めてしまうことも。また、相手に期待しすぎてしまう傾向もあるため、ときには肩の力を抜いて接することも大切です。",
            
            "ナイト＆プリンスタイプ": "あなたは、誠実さと自由さを兼ね備えた、魅力的な存在です。相手を思いやる優しさと、明るく楽しい雰囲気を自然に作り出せる才能があります。<br><br>【強み】<br>相手の気持ちに寄り添いながらも、新鮮な刺激を与えられる柔軟性が魅力です。恋愛では、安心感とときめきの両方を提供できる、理想的なパートナーとしての素質があります。<br><br>【気をつけたい点】<br>自由を求める気持ちと、相手を大切にしたい気持ちのバランスに迷うことがあります。自分の気持ちを優先しすぎず、相手の気持ちも尊重する姿勢を大切にしましょう。",
            
            "プリンス＆キングタイプ": "あなたは、自由な発想力とリーダーシップを兼ね備えた、個性的な存在です。ユニークな視点を持ちながらも、しっかりとした判断力で物事を進めることができます。<br><br>【強み】<br>型にはまらない発想と、確かな決断力の組み合わせが魅力です。恋愛でも、新鮮な刺激と安心感を同時に与えられる、特別な存在として映ります。<br><br>【気をつけたい点】<br>自由な発想が強すぎて、相手を混乱させてしまうことも。また、自分の考えを押し通しすぎないよう、相手の意見にも耳を傾けることが大切です。",
            
            "アイドル＆バリキャリタイプ": "あなたは、愛される魅力と冷静な判断力を兼ね備えた、魅力的な存在です。明るく可憐な雰囲気を持ちながらも、しっかりとした芯の強さも持ち合わせています。<br><br>【強み】<br>感情表現が豊かで、相手を惹きつける魅力がありながら、理性的な判断もできるバランスの良さが特徴です。恋愛では、甘えることもできれば、頼られることもできる、理想的なパートナーとしての素質があります。<br><br>【気をつけたい点】<br>感情と理性のバランスに迷うことがあります。また、相手に合わせすぎて、自分の気持ちを見失ってしまうこともあるため、ときには自分の本音と向き合うことが大切です。",
            
            "バリキャリ＆マザータイプ": "あなたは、冷静な判断力と優しさを兼ね備えた、包容力のある存在です。しっかりとした芯の強さを持ちながらも、相手を思いやる温かさも持ち合わせています。<br><br>【強み】<br>理性的な判断と、相手への思いやりのバランスが取れていることが魅力です。恋愛では、頼れる存在でありながら、心の支えにもなれる、理想的なパートナーとしての素質があります。<br><br>【気をつけたい点】<br>相手に尽くしすぎて、自分を後回しにしてしまうことがあります。また、感情を抑えすぎて、本音を伝えられないこともあるため、ときには素直な気持ちを表現することも大切です。",
            
            "マザー＆アイドルタイプ": "あなたは、優しさと愛される魅力を兼ね備えた、心癒される存在です。包容力のある温かさを持ちながらも、明るく可憐な雰囲気も持ち合わせています。<br><br>【強み】<br>相手を思いやる優しさと、自然と人を惹きつける魅力の組み合わせが特徴です。恋愛では、安心感とときめきの両方を提供できる、理想的なパートナーとしての素質があります。<br><br>【気をつけたい点】<br>相手に合わせすぎて、自分の気持ちを抑えてしまうことがあります。また、愛されたい気持ちが強すぎて、依存的な関係になってしまうこともあるため、自分らしさを大切にすることが重要です。"
        };

        // 性別に応じてスコアのパラメータ名を取得
        const scores = userGender === 'male' 
            ? {
                "キングタイプ": parseInt(urlParams.get('king')) || 0,
                "ナイトタイプ": parseInt(urlParams.get('knight')) || 0,
                "プリンスタイプ": parseInt(urlParams.get('prince')) || 0
            }
            : {
                "アイドルタイプ": parseInt(urlParams.get('idol')) || 0,
                "バリキャリタイプ": parseInt(urlParams.get('career')) || 0,
                "マザータイプ": parseInt(urlParams.get('mother')) || 0
            };

        // バランスタイプの判定
        let displayType;
        if (userGender === "male") {
            const maxScore = Math.max(...Object.values(scores));
            const maxTypes = Object.entries(scores).filter(([_, score]) => score === maxScore);
            
            if (maxTypes.length === 3) {
                displayType = "バランスタイプ";
            } else if (maxTypes.length === 2) {
                const [type1, type2] = maxTypes.map(([type]) => type);
                if (type1 === "キングタイプ" && type2 === "ナイトタイプ" || type1 === "ナイトタイプ" && type2 === "キングタイプ") {
                    displayType = "キング＆ナイトタイプ";
                } else if (type1 === "ナイトタイプ" && type2 === "プリンスタイプ" || type1 === "プリンスタイプ" && type2 === "ナイトタイプ") {
                    displayType = "ナイト＆プリンスタイプ";
                } else if (type1 === "プリンスタイプ" && type2 === "キングタイプ" || type1 === "キングタイプ" && type2 === "プリンスタイプ") {
                    displayType = "プリンス＆キングタイプ";
                } else {
                    displayType = maxTypes[0][0];
                }
            } else {
                displayType = maxTypes[0][0];
            }
        } else {
            const maxScore = Math.max(...Object.values(scores));
            const maxTypes = Object.entries(scores).filter(([_, score]) => score === maxScore);
            
            if (maxTypes.length === 3) {
                displayType = "バランスタイプ";
            } else if (maxTypes.length === 2) {
                const [type1, type2] = maxTypes.map(([type]) => type);
                if (type1 === "アイドルタイプ" && type2 === "バリキャリタイプ" || type1 === "バリキャリタイプ" && type2 === "アイドルタイプ") {
                    displayType = "アイドル＆バリキャリタイプ";
                } else if (type1 === "バリキャリタイプ" && type2 === "マザータイプ" || type1 === "マザータイプ" && type2 === "バリキャリタイプ") {
                    displayType = "バリキャリ＆マザータイプ";
                } else if (type1 === "マザータイプ" && type2 === "アイドルタイプ" || type1 === "アイドルタイプ" && type2 === "マザータイプ") {
                    displayType = "マザー＆アイドルタイプ";
                } else {
                    displayType = maxTypes[0][0];
                }
            } else {
                displayType = maxTypes[0][0];
            }
        }

        // 結果を表示
        const resultTypeElement = document.getElementById("resultType");
        const resultText = document.getElementById("resultText");

        if (resultTypeElement) resultTypeElement.textContent = `あなたのタイプは「${displayType}」です！`;
        if (resultText && descriptions[displayType]) {
            resultText.innerHTML = descriptions[displayType];
        }

        // キャラクター画像を表示
        const characterContainer = document.getElementById("character-container");
        const characterImage = document.getElementById("character-image");
        const characterName = document.getElementById("character-name");

        console.log("Display Type:", displayType);
        console.log("Character Images:", characterImages);
        console.log("User Gender:", userGender);

        if (displayType === "バランスタイプ") {
            const balanceImage = characterImages["バランスタイプ"][userGender];
            console.log("Balance Image:", balanceImage);
            if (balanceImage) {
                characterImage.src = balanceImage.image;
                characterImage.alt = balanceImage.name;
                characterName.textContent = balanceImage.name;
                characterContainer.style.display = "block";
            } else {
                console.error("Balance image not found for gender:", userGender);
                characterContainer.style.display = "none";
            }
        } else if (characterImages[displayType]) {
            console.log("Character Image for type:", characterImages[displayType]);
            characterImage.src = characterImages[displayType].image;
            characterImage.alt = characterImages[displayType].name;
            characterName.textContent = characterImages[displayType].name;
            characterContainer.style.display = "block";
        } else {
            console.error("Character image not found for type:", displayType);
            characterContainer.style.display = "none";
        }

        // 画像の読み込みエラーを監視
        characterImage.onerror = function() {
            console.error("Failed to load image:", this.src);
            characterContainer.style.display = "none";
        };

        // グラフの表示処理
        if (userGender === 'female') {
            // 女性の場合
            document.getElementById('type1-label').textContent = 'アイドルタイプ';
            document.getElementById('type2-label').textContent = 'バリキャリタイプ';
            document.getElementById('type3-label').textContent = 'マザータイプ';
            
            const idolScore = parseInt(urlParams.get('idol')) || 0;
            const careerScore = parseInt(urlParams.get('career')) || 0;
            const motherScore = parseInt(urlParams.get('mother')) || 0;
            
            document.getElementById('type1-percentage').textContent = idolScore;
            document.getElementById('type2-percentage').textContent = careerScore;
            document.getElementById('type3-percentage').textContent = motherScore;
            
            // アニメーションのために少し遅延を入れる
            setTimeout(() => {
                document.getElementById('type1-bar').style.width = `${idolScore}%`;
                document.getElementById('type2-bar').style.width = `${careerScore}%`;
                document.getElementById('type3-bar').style.width = `${motherScore}%`;
            }, 100);

            console.log('Female scores:', { idol: idolScore, career: careerScore, mother: motherScore });
        } else {
            // 男性の場合
            document.getElementById('type1-label').textContent = 'キングタイプ';
            document.getElementById('type2-label').textContent = 'ナイトタイプ';
            document.getElementById('type3-label').textContent = 'プリンスタイプ';
            
            const kingScore = parseInt(urlParams.get('king')) || 0;
            const knightScore = parseInt(urlParams.get('knight')) || 0;
            const princeScore = parseInt(urlParams.get('prince')) || 0;
            
            document.getElementById('type1-percentage').textContent = kingScore;
            document.getElementById('type2-percentage').textContent = knightScore;
            document.getElementById('type3-percentage').textContent = princeScore;
            
            // アニメーションのために少し遅延を入れる
            setTimeout(() => {
                document.getElementById('type1-bar').style.width = `${kingScore}%`;
                document.getElementById('type2-bar').style.width = `${knightScore}%`;
                document.getElementById('type3-bar').style.width = `${princeScore}%`;
            }, 100);

            console.log('Male scores:', { king: kingScore, knight: knightScore, prince: princeScore });
        }
    </script>
</body>
</html>
